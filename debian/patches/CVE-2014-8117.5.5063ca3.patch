Subject: Document changes
Upstream-Author: Christos Zoulas <christos@zoulas.com>
Date: Thu Nov 27 16:15:06 2014 +0000
Origin: FILE5_20-35-g5063ca3
Last-Update: 2015-01-09

--- a/doc/file.man
+++ b/doc/file.man
@@ -16,6 +16,7 @@
 .Op Fl F Ar separator
 .Op Fl f Ar namefile
 .Op Fl m Ar magicfiles
+.Op Fl R Ar maxrecursion
 .Ar
 .Ek -words
 .Nm
@@ -278,6 +279,11 @@
 Normally
 .Nm
 translates unprintable characters to their octal representation.
+.It Fl R , Fl Fl recursion Ar maxlevel
+Set the maximum recursion level for indirect type magic or name/use entry
+invocations.
+The default is
+.Dv 15 .
 .It Fl s , -special-files
 Normally,
 .Nm
--- a/doc/libmagic.man
+++ b/doc/libmagic.man
@@ -38,6 +38,8 @@
 .Nm magic_check ,
 .Nm magic_compile ,
 .Nm magic_load
+.Nm magic_setparam ,
+.Nm magic_getparam ,
 .Nd Magic number recognition library.
 .Sh LIBRARY
 .Lb libmagic
@@ -62,7 +64,9 @@
 .Ft int
 .Fn magic_compile "magic_t cookie, const char *filename"
 .Ft int
-.Fn magic_load "magic_t cookie, const char *filename"
+.Fn magic_getparam "magic_t cookie" "int param" "void *value"
+.Ft int
+.Fn magic_setparam "magic_t cookie" "int param" "const void *value"
 .Sh DESCRIPTION
 These functions
 operate on the magic database file
@@ -204,6 +208,21 @@
 adds
 .Dq .mgc
 to the database filename as appropriate.
+.Pp
+The
+.Fn magic_getparam
+and
+.Fn magic_setparam
+allow getting and setting various limits related to the the magic
+library.
+.Bl -column "MAGIC_PARAM_MAX_RECURSION" "size_t" "Default" -offset indent
+.It Sy "Parameter" Ta Sy "Type" Ta Sy "Default
+.It Li MAGIC_PARAM_MAX_RECURSION Ta size_t Ta 15
+.El
+The
+.Dv MAGIC_PARAM_MAX_RECURSION
+parameter controls how many levels of recursion will be followed for
+indirect magic entries or for name/use calls.
 .Sh RETURN VALUES
 The function
 .Fn magic_open
